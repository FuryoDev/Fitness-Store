{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/mouji/IdeaProjects/Fitness-store-2022/angular-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { OrderInfo } from \"../../../common/shopping/orderInfo\";\nimport { Cart } from \"../../../common/shopping/cart\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/shopping/order/order.service\";\nimport * as i2 from \"../../../services/shopping/cart/cart.service\";\nimport * as i3 from \"../../../services/authentication/token-storage.service\";\nimport * as i4 from \"../../../services/shopping/payment-method/payment-method.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\n\nfunction CheckoutPageComponent_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"button\", 15);\n    i0.ɵɵtext(5, \"-\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 16);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 17);\n    i0.ɵɵtext(9, \"+\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const cartItem_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cartItem_r2.productInfo.name);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(cartItem_r2.quantity);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(cartItem_r2.totalPrice);\n  }\n}\n\nfunction CheckoutPageComponent_option_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const paymentMethod_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(paymentMethod_r3.name);\n  }\n}\n\nexport class CheckoutPageComponent {\n  constructor(orderService, cartService, tokenStorageService, paymentMethodService) {\n    this.orderService = orderService;\n    this.cartService = cartService;\n    this.tokenStorageService = tokenStorageService;\n    this.paymentMethodService = paymentMethodService;\n    this.cart = new Cart();\n    this.orderInfo = new OrderInfo();\n    this.cartItems = [];\n    this.paymentMethods = [];\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      //TODO: Transfer this cause it's duplicated code\n      _this.retrievePaymentMethods();\n\n      yield Promise.all([_this.retrieveUserCart(), _this.retrieveCartItems()]);\n    })();\n  }\n\n  increaseQuantity(cartItem) {\n    console.log(cartItem);\n  }\n\n  retrieveCartItems() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this2.retrieveUserCart();\n\n      _this2.cartService.retrieveCartItems(_this2.cart.cartId).subscribe(data => {\n        _this2.cartItems = data;\n      }, error => {\n        console.log(error);\n      });\n    })();\n  }\n\n  retrieveUserCart() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this3.cartService.retrieveCart().toPromise().then(data => {\n        if (data != undefined) _this3.cart = data;\n      }, error => {\n        console.log(error);\n      });\n    })();\n  }\n\n  retrievePaymentMethods() {\n    this.paymentMethodService.getAllPaymentMethods().subscribe(data => {\n      this.paymentMethods = data;\n    }, error => {\n      console.log(error);\n    });\n  }\n\n  validateCheckout() {\n    this.orderService.processCheckout(this.orderInfo, this.cartItems).subscribe(data => {\n      console.log(data);\n    }, error => {\n      console.log(error);\n    });\n  }\n\n}\n\nCheckoutPageComponent.ɵfac = function CheckoutPageComponent_Factory(t) {\n  return new (t || CheckoutPageComponent)(i0.ɵɵdirectiveInject(i1.OrderService), i0.ɵɵdirectiveInject(i2.CartService), i0.ɵɵdirectiveInject(i3.TokenStorageService), i0.ɵɵdirectiveInject(i4.PaymentMethodService));\n};\n\nCheckoutPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CheckoutPageComponent,\n  selectors: [[\"app-checkout-page\"]],\n  decls: 36,\n  vars: 3,\n  consts: [[1, \"checkout-page\"], [1, \"cart-section\"], [1, \"cart-table\"], [4, \"ngFor\", \"ngForOf\"], [1, \"user-section\"], [1, \"user-form\"], [1, \"form-group\"], [\"for\", \"street\"], [\"type\", \"text\", \"id\", \"street\", \"name\", \"street\", \"required\", \"\"], [\"for\", \"city\"], [\"type\", \"text\", \"id\", \"city\", \"name\", \"city\", \"required\", \"\"], [\"for\", \"country\"], [\"type\", \"text\", \"id\", \"country\", \"name\", \"country\", \"required\", \"\"], [\"name\", \"paymentMethod\", \"id\", \"paymentMethod\", 3, \"ngModel\", \"ngModelChange\"], [1, \"checkout-button\", 3, \"click\"], [1, \"quantity-button\", \"decrement-button\"], [1, \"quantity\"], [1, \"quantity-button\", \"increment-button\"]],\n  template: function CheckoutPageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n      i0.ɵɵtext(3, \"Validation de commande\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"table\", 2)(5, \"thead\")(6, \"tr\")(7, \"th\");\n      i0.ɵɵtext(8, \"Produit\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"th\");\n      i0.ɵɵtext(10, \"Quantit\\u00E9\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"th\");\n      i0.ɵɵtext(12, \"Prix total\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(13, \"tbody\");\n      i0.ɵɵtemplate(14, CheckoutPageComponent_tr_14_Template, 12, 3, \"tr\", 3);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(15, \"div\", 4)(16, \"h2\");\n      i0.ɵɵtext(17, \"Informations personnelles\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"form\", 5)(19, \"div\", 6)(20, \"label\", 7);\n      i0.ɵɵtext(21, \"Street :\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(22, \"input\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"div\", 6)(24, \"label\", 9);\n      i0.ɵɵtext(25, \"City:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(26, \"input\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"div\", 6)(28, \"label\", 11);\n      i0.ɵɵtext(29, \"Country:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(30, \"input\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"div\", 6)(32, \"select\", 13);\n      i0.ɵɵlistener(\"ngModelChange\", function CheckoutPageComponent_Template_select_ngModelChange_32_listener($event) {\n        return ctx.orderInfo.paymentMethod = $event;\n      });\n      i0.ɵɵtemplate(33, CheckoutPageComponent_option_33_Template, 2, 1, \"option\", 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(34, \"button\", 14);\n      i0.ɵɵlistener(\"click\", function CheckoutPageComponent_Template_button_click_34_listener() {\n        return ctx.validateCheckout();\n      });\n      i0.ɵɵtext(35, \"Valider la commande\");\n      i0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(14);\n      i0.ɵɵproperty(\"ngForOf\", ctx.cartItems);\n      i0.ɵɵadvance(18);\n      i0.ɵɵproperty(\"ngModel\", ctx.orderInfo.paymentMethod);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.paymentMethods);\n    }\n  },\n  dependencies: [i5.NgForOf, i6.ɵNgNoValidate, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.NgModel, i6.NgForm],\n  styles: [\".checkout-page[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: flex-start;\\n  background-color: #f5f5f5;\\n  padding: 20px;\\n}\\n\\n.cart-section[_ngcontent-%COMP%] {\\n  width: 50%;\\n  padding-right: 10px;\\n}\\n\\n.user-section[_ngcontent-%COMP%] {\\n  width: 50%;\\n  padding-left: 10px;\\n}\\n\\n.cart-table[_ngcontent-%COMP%] {\\n  width: 100%;\\n  border-collapse: collapse;\\n  margin-bottom: 20px;\\n}\\n\\n.cart-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\n  background-color: #333;\\n  color: #fff;\\n  padding: 10px;\\n  text-align: left;\\n}\\n\\n.cart-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n  padding: 10px;\\n  border-bottom: 1px solid #ccc;\\n}\\n\\nh1[_ngcontent-%COMP%] {\\n  color: #333;\\n  font-size: 24px;\\n  margin-bottom: 20px;\\n}\\n\\nh2[_ngcontent-%COMP%] {\\n  color: #333;\\n  font-size: 20px;\\n  margin-bottom: 20px;\\n}\\n\\n.user-form[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.form-group[_ngcontent-%COMP%] {\\n  margin-bottom: 10px;\\n}\\n\\nlabel[_ngcontent-%COMP%] {\\n  font-weight: bold;\\n}\\n\\ninput[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=tel][_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 8px 12px;\\n  border: 1px solid #ccc;\\n  border-radius: 4px;\\n  margin-top: 4px;\\n  font-size: 14px;\\n  box-sizing: border-box;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoZWNrb3V0LXBhZ2UuY29tcG9uZW50LnNhc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSx5QkFBQTtFQUNBLGFBQUE7QUFDRjs7QUFDQTtFQUNFLFVBQUE7RUFDQSxtQkFBQTtBQUVGOztBQUFBO0VBQ0UsVUFBQTtFQUNBLGtCQUFBO0FBR0Y7O0FBREE7RUFDRSxXQUFBO0VBQ0EseUJBQUE7RUFDQSxtQkFBQTtBQUlGOztBQUZBO0VBQ0Usc0JBQUE7RUFDQSxXQUFBO0VBQ0EsYUFBQTtFQUNBLGdCQUFBO0FBS0Y7O0FBSEE7RUFDRSxhQUFBO0VBQ0EsNkJBQUE7QUFNRjs7QUFIQTtFQUNFLFdBQUE7RUFDQSxlQUFBO0VBQ0EsbUJBQUE7QUFNRjs7QUFKQTtFQUNFLFdBQUE7RUFDQSxlQUFBO0VBQ0EsbUJBQUE7QUFPRjs7QUFMQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtBQVFGOztBQU5BO0VBQ0UsbUJBQUE7QUFTRjs7QUFQQTtFQUNFLGlCQUFBO0FBVUY7O0FBUkE7OztFQUdFLFdBQUE7RUFDQSxpQkFBQTtFQUNBLHNCQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtFQUNBLHNCQUFBO0FBV0YiLCJmaWxlIjoiY2hlY2tvdXQtcGFnZS5jb21wb25lbnQuc2FzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jaGVja291dC1wYWdlXHJcbiAgZGlzcGxheTogZmxleFxyXG4gIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNVxyXG4gIHBhZGRpbmc6IDIwcHhcclxuXHJcbi5jYXJ0LXNlY3Rpb25cclxuICB3aWR0aDogNTAlXHJcbiAgcGFkZGluZy1yaWdodDogMTBweFxyXG5cclxuLnVzZXItc2VjdGlvblxyXG4gIHdpZHRoOiA1MCVcclxuICBwYWRkaW5nLWxlZnQ6IDEwcHhcclxuXHJcbi5jYXJ0LXRhYmxlXHJcbiAgd2lkdGg6IDEwMCVcclxuICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlXHJcbiAgbWFyZ2luLWJvdHRvbTogMjBweFxyXG5cclxuLmNhcnQtdGFibGUgdGhcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzXHJcbiAgY29sb3I6ICNmZmZcclxuICBwYWRkaW5nOiAxMHB4XHJcbiAgdGV4dC1hbGlnbjogbGVmdFxyXG5cclxuLmNhcnQtdGFibGUgdGRcclxuICBwYWRkaW5nOiAxMHB4XHJcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNjY2NcclxuXHJcblxyXG5oMVxyXG4gIGNvbG9yOiAjMzMzXHJcbiAgZm9udC1zaXplOiAyNHB4XHJcbiAgbWFyZ2luLWJvdHRvbTogMjBweFxyXG5cclxuaDJcclxuICBjb2xvcjogIzMzM1xyXG4gIGZvbnQtc2l6ZTogMjBweFxyXG4gIG1hcmdpbi1ib3R0b206IDIwcHhcclxuXHJcbi51c2VyLWZvcm1cclxuICBkaXNwbGF5OiBmbGV4XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtblxyXG5cclxuLmZvcm0tZ3JvdXBcclxuICBtYXJnaW4tYm90dG9tOiAxMHB4XHJcblxyXG5sYWJlbFxyXG4gIGZvbnQtd2VpZ2h0OiBib2xkXHJcblxyXG5pbnB1dFt0eXBlPVwidGV4dFwiXSxcclxuaW5wdXRbdHlwZT1cImVtYWlsXCJdLFxyXG5pbnB1dFt0eXBlPVwidGVsXCJdXHJcbiAgd2lkdGg6IDEwMCVcclxuICBwYWRkaW5nOiA4cHggMTJweFxyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2NcclxuICBib3JkZXItcmFkaXVzOiA0cHhcclxuICBtYXJnaW4tdG9wOiA0cHhcclxuICBmb250LXNpemU6IDE0cHhcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94XHJcbiJdfQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["OrderInfo","Cart","i0","CheckoutPageComponent","constructor","orderService","cartService","tokenStorageService","paymentMethodService","ngOnInit","retrievePaymentMethods","Promise","all","retrieveUserCart","retrieveCartItems","increaseQuantity","cartItem","console","log","cart","cartId","subscribe","data","cartItems","error","retrieveCart","toPromise","then","undefined","getAllPaymentMethods","paymentMethods","validateCheckout","processCheckout","orderInfo","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\mouji\\IdeaProjects\\Fitness-store-2022\\angular-frontend\\src\\app\\components\\shopping\\checkout-page\\checkout-page.component.ts","C:\\Users\\mouji\\IdeaProjects\\Fitness-store-2022\\angular-frontend\\src\\app\\components\\shopping\\checkout-page\\checkout-page.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport {CartItem} from \"../../../common/shopping/cart-item\";\nimport {OrderService} from \"../../../services/shopping/order/order.service\";\nimport {OrderInfo} from \"../../../common/shopping/orderInfo\";\nimport {CartService} from \"../../../services/shopping/cart/cart.service\";\nimport {TokenStorageService} from \"../../../services/authentication/token-storage.service\";\nimport {Cart} from \"../../../common/shopping/cart\";\nimport {PaymentMethod} from \"../../../common/shopping/payment-method\";\nimport {PaymentMethodService} from \"../../../services/shopping/payment-method/payment-method.service\";\n\n@Component({\n  selector: 'app-checkout-page',\n  templateUrl: './checkout-page.component.html',\n  styleUrls: ['./checkout-page.component.sass']\n})\nexport class CheckoutPageComponent implements OnInit {\n\n  cart: Cart = new Cart();\n  orderInfo: OrderInfo = new OrderInfo();\n  cartItems: CartItem[] = [];\n  paymentMethods: PaymentMethod[] = [];\n\n  constructor(private orderService: OrderService,\n              private cartService: CartService,\n              private tokenStorageService: TokenStorageService,\n              private paymentMethodService: PaymentMethodService) { }\n\n  async ngOnInit() {\n    //TODO: Transfer this cause it's duplicated code\n    this.retrievePaymentMethods();\n    await Promise.all([this.retrieveUserCart(), this.retrieveCartItems()])\n\n  }\n\n  increaseQuantity(cartItem: CartItem) {\n    console.log(cartItem);\n  }\n\n  async retrieveCartItems(){\n    await this.retrieveUserCart();\n\n    this.cartService.retrieveCartItems(this.cart.cartId).subscribe(\n      data => {\n        this.cartItems = data;\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  }\n\n  async retrieveUserCart() {\n    await this.cartService.retrieveCart().toPromise().then(\n      data => {\n        if(data != undefined)\n          this.cart = data;\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  }\n\n  retrievePaymentMethods() {\n    this.paymentMethodService.getAllPaymentMethods().subscribe(\n      data => {\n        this.paymentMethods = data;\n      },\n      error => {\n        console.log(error);\n      }\n    )\n  }\n\n  validateCheckout() {\n    this.orderService.processCheckout(this.orderInfo, this.cartItems).subscribe(\n      data => {\n        console.log(data)\n      },\n      error => {\n        console.log(error);\n      }\n    )\n  }\n}\n","<!--<div class=\"checkout-page\">-->\n<!--  <h1>Validation de commande</h1>-->\n<!--  <table class=\"cart-table\">-->\n<!--    <thead>-->\n<!--    <tr>-->\n<!--      <th>Produit</th>-->\n<!--      <th>Quantité</th>-->\n<!--      <th>Prix total</th>-->\n<!--      <th></th>-->\n<!--    </tr>-->\n<!--    </thead>-->\n<!--    <tbody>-->\n<!--    <tr *ngFor=\"let item of cartItems\">-->\n<!--      <td>{{ item.productInfo }}</td>-->\n<!--      <td>{{ item.quantity }}</td>-->\n<!--      <td>{{ item.totalPrice }}</td>-->\n<!--      <td>-->\n<!--        <button class=\"quantity-button\" (click)=\"increaseQuantity(item)\">+</button>-->\n<!--      </td>-->\n<!--    </tr>-->\n<!--    </tbody>-->\n<!--  </table>-->\n<!--</div>-->\n\n<div class=\"checkout-page\">\n  <div class=\"cart-section\">\n    <h1>Validation de commande</h1>\n    <table class=\"cart-table\">\n      <thead>\n      <tr>\n        <th>Produit</th>\n        <th>Quantité</th>\n        <th>Prix total</th>\n      </tr>\n      </thead>\n      <tbody>\n      <tr *ngFor=\"let cartItem of cartItems\">\n        <td>{{cartItem.productInfo.name}}</td>\n        <td>\n          <button class=\"quantity-button decrement-button\">-</button>\n          <span class=\"quantity\">{{cartItem.quantity}}</span>\n          <button class=\"quantity-button increment-button\">+</button>\n        </td>\n        <td>{{cartItem.totalPrice}}</td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <div class=\"user-section\">\n    <h2>Informations personnelles</h2>\n    <form  class=\"user-form\">\n\n      <div class=\"form-group\">\n        <label for=\"street\">Street :</label>\n        <input type=\"text\" id=\"street\" name=\"street\" required>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"city\">City:</label>\n        <input type=\"text\" id=\"city\" name=\"city\" required>\n      </div>\n      <div class=\"form-group\">\n        <label for=\"country\">Country:</label>\n        <input type=\"text\" id=\"country\" name=\"country\" required>\n      </div>\n      <div class=\"form-group\">\n        <select name=\"paymentMethod\" id=\"paymentMethod\" [(ngModel)]=\"orderInfo.paymentMethod\">\n          <option *ngFor=\"let paymentMethod of paymentMethods\">{{paymentMethod.name}}</option>\n        </select>\n      </div>\n      <button class=\"checkout-button\" (click)=\"validateCheckout()\">Valider la commande</button>\n    </form>\n  </div>\n</div>\n\n\n"]},"metadata":{},"sourceType":"module"}